<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æˆå“ä¿¡æ¯æŸ¥è¯¢</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background-color: #f3f4f6; }
    @keyframes fadeIn { from {opacity:0; transform:translateY(10px);} to {opacity:1; transform:translateY(0);} }
    .fade-in { animation: fadeIn 0.3s ease-in-out; }

    table { border-collapse: collapse; width: 100%; background:white; font-size:0.9rem; }
    table th, table td { border:1px solid #e5e7eb; text-align:center; padding:0.5rem; }
    table th { background-color: #e0f2fe; color:#1e3a8a; font-weight:600; }
    table tr:hover { background-color: #f0f9ff; }
  </style>
</head>
<body class="p-6">

  <!-- æ ‡é¢˜æ ï¼ˆLogo + æ ‡é¢˜ + ä¿å¯†å£°æ˜åŒä¸€è¡Œï¼‰ -->
  <div class="max-w-6xl mx-auto bg-white shadow-lg rounded-xl p-4 flex items-center justify-between fade-in mb-6">
    <!-- å·¦ä¾§ Logo -->
    <div class="flex items-center gap-3">
      <img src="assets/img/trtlogo.png" alt="å…¬å¸Logo" class="h-12 w-12 object-contain" />
      <h1 class="text-2xl font-bold text-gray-700">æˆå“ä¿¡æ¯æŸ¥è¯¢</h1>
    </div>

    <!-- å³ä¾§ä¿å¯†å£°æ˜ -->
       <span class="px-2 py-1 bg-yellow-50 border border-yellow-200 rounded text-yellow-700">ğŸ” æ•°æ®ï¼š2025å¹´7æœˆ1æ—¥</span>
    <span class="px-2 py-1 bg-red-50 border border-red-200 rounded font-semibold text-red-600">âš ï¸ ä¿å¯†å£°æ˜ï¼šå†…éƒ¨æ•°æ®ï¼Œä¸¥ç¦å¤–ä¼ </span>
  </div>

  <!-- æŸ¥è¯¢æ¡ä»¶ -->
  <div class="max-w-6xl mx-auto bg-white shadow-lg rounded-xl p-6 fade-in mb-6">
    <div class="flex flex-wrap items-center gap-4 mb-6">
      <select id="channelSelect" class="border rounded-lg p-2 min-w-[180px] focus:ring focus:ring-blue-200">
        <option value="">é€‰æ‹©æ¸ é“ï¼ˆå¯é€‰ï¼‰</option>
      </select>
      <input id="projectInput" type="text" placeholder="è¾“å…¥é¡¹ç›®å·ï¼ˆéœ€ç²¾å‡†ï¼‰" class="border rounded-lg p-2 flex-1 min-w-[180px] focus:ring focus:ring-blue-200" />
      <input id="nameInput" type="text" placeholder="è¾“å…¥å“åï¼ˆå¯æ¨¡ç³Šæœç´¢ï¼‰" class="border rounded-lg p-2 flex-1 min-w-[180px] focus:ring focus:ring-blue-200" />
      <button id="searchBtn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">æŸ¥è¯¢</button>
    </div>

    <!-- æŸ¥è¯¢ç»“æœè¡¨æ ¼ -->
    <div class="overflow-x-auto">
      <table id="resultTable" class="hidden fade-in">
        <thead>
          <tr>
            <th>é¡¹ç›®å·</th>
            <th>å“å</th>
            <th>è§„æ ¼</th>
            <th>å•ä½</th>
            <th>é›¶å”®ä»·ï¼ˆå…ƒï¼‰</th>
            <th>å“ç‰Œ</th>
            <th>æ¸ é“</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>

    <p id="noResult" class="text-center text-gray-500 mt-4 hidden">æœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„è®°å½•ã€‚</p>
  </div>

  <script>
    let allData = [];

    fetch('data.json')
      .then(res => res.json())
      .then(data => {
        allData = data;
        populateChannels(data);
      });

    function populateChannels(data) {
      const select = document.getElementById('channelSelect');
      const channels = [...new Set(data.map(item => item.å¯ä¾›åº”æ¸ é“).filter(Boolean))];
      channels.forEach(ch => {
        const option = document.createElement('option');
        option.value = ch;
        option.textContent = ch;
        select.appendChild(option);
      });
    }

    document.getElementById('searchBtn').addEventListener('click', () => {
      const project = document.getElementById('projectInput').value.trim();
      const name = document.getElementById('nameInput').value.trim();
      const channel = document.getElementById('channelSelect').value;

      let filtered = allData.filter(item => {
        const matchProject = project ? item.é¡¹ç›®å· === project : true;
        const matchName = name ? item.å“å.includes(name) : true;
        const matchChannel = channel ? item.å¯ä¾›åº”æ¸ é“ === channel : true;
        return matchProject && matchName && matchChannel;
      });

      if (!project && !name && channel) {
        filtered = allData.filter(item => item.å¯ä¾›åº”æ¸ é“ === channel);
      }

      renderTable(filtered);
    });

    function renderTable(data) {
      const table = document.getElementById('resultTable');
      const tbody = document.getElementById('tableBody');
      const noResult = document.getElementById('noResult');
      tbody.innerHTML = '';

      if (data.length === 0) {
        table.classList.add('hidden');
        noResult.classList.remove('hidden');
        return;
      }

      noResult.classList.add('hidden');
      table.classList.remove('hidden');

      data.forEach(item => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${item.é¡¹ç›®å· || ''}</td>
          <td>${item.å“å || ''}</td>
          <td>${item.è§„æ ¼ || ''}</td>
          <td>${item.å•ä½ || ''}</td>
          <td>${item.é›¶å”®ä»· ?? item['é›¶å”®ä»·ï¼ˆå…ƒï¼‰'] ?? ''}</td>
          <td>${item.å“ç‰Œ || ''}</td>
          <td>${item.å¯ä¾›åº”æ¸ é“ || ''}</td>
        `;
        tbody.appendChild(tr);
      });
    }
  </script>
</body>
</html>